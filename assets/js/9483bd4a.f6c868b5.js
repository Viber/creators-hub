"use strict";(self.webpackChunkcreators_hub=self.webpackChunkcreators_hub||[]).push([[6348],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),m=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(o.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=m(a),g=r,k=u["".concat(o,".").concat(g)]||u[g]||d[g]||l;return a?n.createElement(k,s(s({ref:t},p),{},{components:a})):n.createElement(k,s({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,s=new Array(l);s[0]=g;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[u]="string"==typeof e?e:r,s[1]=i;for(var m=2;m<l;m++)s[m]=a[m];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}g.displayName="MDXCreateElement"},9915:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>m});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_label:"Send a Message",sidebar_position:3},s="Send a Message",i={unversionedId:"bots-api/resources/messaging/send-message",id:"bots-api/resources/messaging/send-message",title:"Send a Message",description:"POST https://chatapi.viber.com/pa/send_message",source:"@site/docs/bots-api/resources/messaging/send-message.md",sourceDirName:"bots-api/resources/messaging",slug:"/bots-api/resources/messaging/send-message",permalink:"/creators-hub/docs/bots-api/resources/messaging/send-message",draft:!1,editUrl:"https://github.com/Viber/creators-hub/edit/main/docs/bots-api/resources/messaging/send-message.md",tags:[],version:"current",lastUpdatedBy:"Or Chen",lastUpdatedAt:1676986313,formattedLastUpdatedAt:"Feb 21, 2023",sidebarPosition:3,frontMatter:{sidebar_label:"Send a Message",sidebar_position:3},sidebar:"botsAPISidebar",previous:{title:"The Welcome Message",permalink:"/creators-hub/docs/bots-api/resources/messaging/welcome-message"},next:{title:"Broadcast Messaging",permalink:"/creators-hub/docs/bots-api/resources/messaging/brodcast-message"}},o={},m=[{value:"Request",id:"request",level:3},{value:"Headers",id:"headers",level:4},{value:"Parameters",id:"parameters",level:4},{value:"Response",id:"response",level:3},{value:"Attributes",id:"attributes",level:4},{value:"Billing Statuses",id:"billing-statuses",level:4}],p={toc:m},u="wrapper";function d(e){let{components:t,...a}=e;return(0,r.kt)(u,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"send-a-message"},"Send a Message"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"POST")," https://",(0,r.kt)("area",null),"chatapi.viber.com/pa/send_message")),(0,r.kt)("p",null,"This endpoint allows you to send a message to a subscriber of your bot."),(0,r.kt)("admonition",{title:"Pay attention",type:"note"},(0,r.kt)("p",{parentName:"admonition"},"The following limitations apply to the ",(0,r.kt)("inlineCode",{parentName:"p"},"send_message")," endpoint:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"You can send up to 100 messages to a user within an hour without receiving a reply. The",(0,r.kt)("br",null),"\nmessage count towards the limit will reset when the user replies to a message. Once you",(0,r.kt)("br",null),"\nhave reached the limit, you will receive the following error response:",(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"li"},'{"status":12,"status_message":"Too many requests", message_token: "1234567890", chat_hostname: "SN-CHAT-0x_"}')),(0,r.kt)("li",{parentName:"ul"},"Maximum message size is 30KB."))),(0,r.kt)("h3",{id:"request"},"Request"),(0,r.kt)("h4",{id:"headers"},"Headers"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Content-Type:")," application/json",(0,r.kt)("br",null),"\n",(0,r.kt)("strong",{parentName:"p"},"Authorization:")," X-Viber-Auth-Token: YOUR_AUTHENTICATION_TOKEN"),(0,r.kt)("h4",{id:"parameters"},"Parameters"),(0,r.kt)("hr",null),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"type"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The type of the message."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Required.")," one of the available message types. See full list ",(0,r.kt)("a",{parentName:"td",href:"/creators-hub/docs/bots-api/data-models/message"},"here"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sender.name"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the bot."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Required.")," Max 28 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sender.avatar"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The avatar of the bot."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Optional.")," the avatar size should not exceed 100KB. The recommended dimensions for the avatar are 720x720.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tracking_data"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"Allow the bot to track messages and user\u2019s replies. The tracking_data value sent with the message will be returned with the user's reply."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Optional")," Max 4000 characters")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"min_api_version"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"The minimum API version that the message is supported in."),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("strong",{parentName:"td"},"Optional")," Default value is 1.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Additional fileds based on the message type"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example"',title:'"Example"'},'curl -X POST https://chatapi.viber.com/pa/broadcast_message -H "X-Viber-Auth-Token: YOUR_AUTHENTICATION_TOKEN" -d \'{"type":"text",receiver="jc9HsWTZ2Yf2NkRZ8KcNug==","text":"Hello World","sender":{"name":"Viber Bot","avatar":"http://avatar.example.com"}}\'\n')),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("h4",{id:"attributes"},"Attributes"),(0,r.kt)("hr",null),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Notes"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"status"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"The status of the request."),(0,r.kt)("td",{parentName:"tr",align:null},"0 for success. In case of failure - appropriate failure status number. See ",(0,r.kt)("a",{parentName:"td",href:"../../errors"},"common errors")," for more information")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"status_message"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The status message of the request."),(0,r.kt)("td",{parentName:"tr",align:null},"Success: ok. Failure: ",(0,r.kt)("inlineCode",{parentName:"td"},"invalidUrl"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"invalidAuthToken"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"badData"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"missingData")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"failure"),". See ",(0,r.kt)("a",{parentName:"td",href:"../../errors"},"common errors")," for more information")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"message_token"),(0,r.kt)("td",{parentName:"tr",align:null},"integer"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique id of the message"),(0,r.kt)("td",{parentName:"tr",align:null})),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chat_hostname"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of ther server that host your bot"),(0,r.kt)("td",{parentName:"tr",align:null},"for internal use")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billing_status"),(0,r.kt)("td",{parentName:"tr",align:null},"string"),(0,r.kt)("td",{parentName:"tr",align:null},"An indication of how this message is categorized for billing purposes, allowing you to know if it was charged or not, or whether it counts toward. Read more about bots billing ",(0,r.kt)("a",{parentName:"td",href:"https://help.viber.com/en/article/chatbot-commercial-model"},"here")),(0,r.kt)("td",{parentName:"tr",align:null},"An integer between 0 and 5. See the table in ",(0,r.kt)("a",{parentName:"td",href:"#billing-statuses"},"billing statuses")," section below for more information")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example"',title:'"Example"'},'{\n  "status": 0,\n  "status_message": "ok",\n  "message_token": 1234567890,\n  "chat_hostname": "chatapi.viber.com",\n  "billing_status": 0\n}\n')),(0,r.kt)("h4",{id:"billing-statuses"},"Billing Statuses"),(0,r.kt)("hr",null),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Value"),(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"0"),(0,r.kt)("td",{parentName:"tr",align:null},"free"),(0,r.kt)("td",{parentName:"tr",align:null},"Default for all cases other than the ones listed below: chat extension, reply to open conversation, etc.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"inSessionNonBillableBot"),(0,r.kt)("td",{parentName:"tr",align:null},"1:1 message/keyboard sent in a session from a non-billable bot")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"2"),(0,r.kt)("td",{parentName:"tr",align:null},"inSessionForBillableBot"),(0,r.kt)("td",{parentName:"tr",align:null},"1:1 message/keyboard sent in a session from a billable bot")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"outOfSessionFreeMessageNonBillableBot"),(0,r.kt)("td",{parentName:"tr",align:null},"Free out of session 1:1 message/keyboard sent by a non-billable bot")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"4"),(0,r.kt)("td",{parentName:"tr",align:null},"outOfSessionFreeMessageForBillableBot"),(0,r.kt)("td",{parentName:"tr",align:null},"Free out of session 1:1 message/keyboard sent by a billable bot")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"5"),(0,r.kt)("td",{parentName:"tr",align:null},"outOfSessionBilledMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"Charged out of session 1:1 message/keyboard sent by a billable bot")))))}d.isMDXComponent=!0}}]);